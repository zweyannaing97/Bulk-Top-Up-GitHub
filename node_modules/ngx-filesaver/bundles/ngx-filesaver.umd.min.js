!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("file-saver"),require("@angular/common/http"),require("rxjs")):"function"==typeof define&&define.amd?define("ngxFileSaver",["exports","@angular/core","file-saver","@angular/common/http","rxjs"],t):t((e=e||self).ngxFileSaver={},e.ng.core,e.saveAs,e.ng.common.http,e.rxjs)}(this,(function(e,t,r,n,o){"use strict";var i=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},s=function(){function e(){}return Object.defineProperty(e.prototype,"isFileSaverSupported",{get:function(){try{return!!new Blob}catch(e){return!1}},enumerable:!0,configurable:!0}),e.prototype.genType=function(e){if(!e||-1===e.lastIndexOf("."))return"text/plain";var t=e.substr(e.lastIndexOf(".")+1);switch(t){case"txt":return"text/plain";case"xml":case"html":return"text/"+t;case"json":return"octet/stream";default:return"application/"+t}},e.prototype.save=function(e,t,n,o){if(!e)throw new Error("Data argument should be a blob instance");var i=new Blob([e],{type:n||e.type||this.genType(t)});r.saveAs(i,decodeURI(t||"download"),o)},e.prototype.saveText=function(e,t,r){var n=new Blob([e]);this.save(n,t,null,r)},e.ngInjectableDef=t.ɵɵdefineInjectable({factory:function(){return new e},token:e,providedIn:"root"}),e=i([t.Injectable({providedIn:"root"})],e)}(),a=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},p=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},c=function(){function e(e,r,n){this.el=e,this.fss=r,this.httpClient=n,this.method="GET",this.success=new t.EventEmitter,this.error=new t.EventEmitter,r.isFileSaverSupported||e.nativeElement.classList.add("filesaver__not-support")}return e.prototype.getName=function(e){return decodeURI(this.fileName||e.headers.get("filename")||e.headers.get("x-filename"))},e.prototype._click=function(){var e=this;if(this.fss.isFileSaverSupported){var t=this.http;if(!t){var r=new n.HttpParams,o=this.query||{};for(var i in o)r.set(i,o[i]);t=this.httpClient.request(this.method,this.url,{observe:"response",responseType:"blob",headers:this.header,params:r})}this.setDisabled(!0),t.subscribe((function(t){200!==t.status||t.body.size<=0?e.error.emit(t):(e.fss.save(t.body,e.getName(t),null,e.fsOptions),e.success.emit(t))}),(function(t){return e.error.emit(t)}),(function(){return e.setDisabled(!1)}))}},e.prototype.setDisabled=function(e){var t=this.el.nativeElement;t.disabled=e,t.classList[e?"add":"remove"]("filesaver__disabled")},e.ctorParameters=function(){return[{type:t.ElementRef},{type:s},{type:n.HttpClient}]},a([t.Input(),p("design:type",Object)],e.prototype,"method",void 0),a([t.Input(),p("design:type",o.Observable)],e.prototype,"http",void 0),a([t.Input(),p("design:type",Object)],e.prototype,"query",void 0),a([t.Input(),p("design:type",Object)],e.prototype,"header",void 0),a([t.Input(),p("design:type",String)],e.prototype,"url",void 0),a([t.Input(),p("design:type",String)],e.prototype,"fileName",void 0),a([t.Input(),p("design:type",Object)],e.prototype,"fsOptions",void 0),a([t.Output(),p("design:type",Object)],e.prototype,"success",void 0),a([t.Output(),p("design:type",Object)],e.prototype,"error",void 0),a([t.HostListener("click"),p("design:type",Function),p("design:paramtypes",[]),p("design:returntype",void 0)],e.prototype,"_click",null),e=a([t.Directive({selector:"[fileSaver]",exportAs:"fileSaver"}),p("design:paramtypes",[t.ElementRef,s,n.HttpClient])],e)}(),l=this&&this.__decorate||function(e,t,r,n){var o,i=arguments.length,s=i<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(i<3?o(s):i>3?o(t,r,s):o(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s},u=function(){function e(){}return e=l([t.NgModule({declarations:[c],exports:[c]})],e)}();e.FileSaverDirective=c,e.FileSaverModule=u,e.FileSaverService=s,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=ngx-filesaver.umd.min.js.map